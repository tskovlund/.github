#!/usr/bin/env bash
# Enforce Conventional Commits.

commit_msg=$(head -1 "$1")
pattern='^(feat|fix|docs|chore|refactor|test|ci|style|perf|build|revert)(\(.+\))?: .+'

if ! echo "$commit_msg" | grep -qE "$pattern"; then
  echo "ERROR: Commit message does not follow Conventional Commits."
  echo ""
  echo "  Format: type(scope): description"
  echo "  Types:  feat, fix, docs, chore, refactor, test, ci, style, perf, build, revert"
  echo ""
  echo "  Got: $commit_msg"
  exit 1
fi
